<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="/styles/main.css">
        <title>Decklister</title>
    </head>
    <body>
        <!-- Blueprint Grid Overlay -->
        <div class="grid-overlay"></div>

        <!-- Corner Brackets -->
        <div class="corner-brackets">
            <div class="corner-bracket tl"></div>
            <div class="corner-bracket tr"></div>
            <div class="corner-bracket bl"></div>
            <div class="corner-bracket br"></div>
        </div>

        <!-- Connection Line (shown on hover) -->
        <div class="connection-line" id="connectionLine">
            <div class="connection-dot start"></div>
            <div class="connection-dot end"></div>
        </div>

        <!-- Landing Page -->
        <div id="landingPage" class="landing-page">
            <div class="landing-content">
                <h1 class="landing-title">Decklister</h1>
                <p class="landing-subtitle">Create and manage your Magic: The Gathering decklists with ease</p>
                <div class="landing-buttons">
                    <button id="getStartedBtn" class="landing-cta">Get Started</button>
                    <button id="landingLoginBtn" class="landing-login-btn">Login</button>
                </div>
            </div>
        </div>

        <!-- Desktop Header -->
        <header id="desktopHeader" class="desktop-header">
            <a href="/" id="logoLink" class="logo-link">
                <h1 class="header-title">Decklister</h1>
            </a>
            <div id="bookmarkWarning" class="bookmark-warning">
                <svg class="warning-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 9v2m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
                <span>Bookmark this page to save your decks!</span>
            </div>
            <div class="header-auth">
                <span id="usernameDisplay" class="username-display" style="display: none;">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                        <circle cx="12" cy="7" r="4"/>
                    </svg>
                </span>
                <button id="createAccountBtn" class="auth-btn primary" style="display: none;">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/>
                        <circle cx="9" cy="7" r="4"/>
                        <line x1="19" y1="8" x2="19" y2="14"/>
                        <line x1="22" y1="11" x2="16" y2="11"/>
                    </svg>
                    Create Account
                </button>
                <button id="loginBtn" class="auth-btn" style="display: none;">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"/>
                        <polyline points="10 17 15 12 10 7"/>
                        <line x1="15" y1="12" x2="3" y2="12"/>
                    </svg>
                    Login
                </button>
                <button id="logoutBtn" class="auth-btn" style="display: none;">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                        <polyline points="16 17 21 12 16 7"/>
                        <line x1="21" y1="12" x2="9" y2="12"/>
                    </svg>
                    Logout
                </button>
            </div>
        </header>

        <!-- Mobile Header -->
        <header class="mobile-header">
            <a href="/" id="mobileLogoLink" class="logo-link">
                <h1 class="mobile-title">Decklister</h1>
            </a>
            <button id="mobileMenuBtn" class="mobile-menu-btn" aria-label="Open deck menu">
                <svg class="menu-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M4 6h16M4 12h16M4 18h16"/>
                </svg>
            </button>
        </header>

        <!-- Mobile Deck Dropdown -->
        <div id="mobileDropdown" class="mobile-dropdown">
            <div id="mobileDecks" class="mobile-decks-list"></div>
            <div class="mobile-auth-section">
                <div id="mobileUsernameDisplay" class="mobile-username-display" style="display: none;"></div>
                <button id="mobileCreateAccountBtn" class="mobile-auth-btn primary" style="display: none;">Create Account</button>
                <button id="mobileLoginBtn" class="mobile-auth-btn" style="display: none;">Login</button>
                <button id="mobileLogoutBtn" class="mobile-auth-btn" style="display: none;">Logout</button>
            </div>
        </div>

        <!-- App Container (sidebar + main content) -->
        <div id="appContainer" class="app-container">
            <!-- Desktop Sidebar -->
            <aside id="sidebar" class="sidebar">
                <div id="decks" class="scrollable deck-list"></div>
                <!-- Resize handle on sidebar right edge -->
                <div id="sidebarResizer" class="resize-handle sidebar-resizer">
                    <span class="resize-dots"></span>
                </div>
            </aside>

            <!-- Main Content Area -->
            <main id="mainContent" class="main-content">
                <!-- Sidebar Expand Button (visible when collapsed) -->
                <button id="sidebarExpand" class="sidebar-expand" aria-label="Expand sidebar">
                    <svg class="expand-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M4 6h16M4 12h16M4 18h16"/>
                    </svg>
                </button>
                <div id="syncScroll" class="scrollable editor-container">
                    <div class="editor-wrapper">
                        <textarea spellcheck="false" id="editor" class="editor-textarea" placeholder="Start typing here to create a new deck. The first line is the title&#13;&#10;&#13;&#10;Card links will appear to the right as you type. Click a link to open the card's scryfall page or just hover over it to see the card&#13;&#10;&#13;&#10;You can add section headers like #header and card quantities like '4x Rat'"></textarea>
                        <!-- Autocomplete Dropdown -->
                        <div id="autocompleteContainer" class="autocomplete-container">
                            <ul id="autocompleteList" class="autocomplete-list"></ul>
                        </div>
                    </div>
                    <span id="hovers" class="card-links"></span>
                </div>
                <div id="display" class="card-display">
                    <!-- Resize handle for card-display (left edge) -->
                    <div id="displayResizer" class="resize-handle display-resizer">
                        <span class="resize-dots"></span>
                    </div>
                    <!-- Mobile render mode resize handle -->
                    <div id="mobileRenderResizer" class="resize-handle mobile-render-resizer">
                        <span class="resize-dots horizontal"></span>
                    </div>
                    <div class="empty-state" id="emptyState">
                        <div class="empty-state-icon">â¬¡</div>
                        <div>Hover card to display</div>
                    </div>
                    <div class="card-preview-container" id="cardPreviewContainer">
                        <div class="blueprint-lines">
                            <div class="blueprint-line horizontal top"></div>
                            <div class="blueprint-line horizontal bottom"></div>
                            <div class="blueprint-line vertical left"></div>
                            <div class="blueprint-line vertical right"></div>
                        </div>
                        <div id="cardImagesContainer"></div>
                    </div>
                </div>
            </main>
        </div>

        <!-- Mobile Render Toggle Button -->
        <button id="renderToggle" class="render-toggle" aria-label="Toggle render view">
            <svg class="render-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="3" width="7" height="7" rx="1"/>
                <rect x="14" y="3" width="7" height="7" rx="1"/>
                <rect x="3" y="14" width="7" height="7" rx="1"/>
                <rect x="14" y="14" width="7" height="7" rx="1"/>
            </svg>
        </button>

        <!-- Share Modal -->
        <div id="shareModal" class="share-modal">
            <div class="share-modal-content">
                <button id="closeShareModal" class="share-modal-close" aria-label="Close modal">&times;</button>
                <h2>Share Deck</h2>
                <p>Copy this link to share your deck:</p>
                <div class="share-url-container">
                    <input type="text" id="shareUrl" class="share-url-input" readonly>
                    <button id="copyShareBtn" class="copy-share-btn">Copy</button>
                </div>
            </div>
        </div>

        <!-- Auth Modal -->
        <div id="authModal" class="auth-modal" data-mode="login">
            <div class="auth-modal-content">
                <button id="authModalClose" class="auth-modal-close" aria-label="Close modal">&times;</button>
                <h2 id="authModalTitle">Login</h2>
                <div id="authError" class="auth-error"></div>
                <form id="authForm" class="auth-form">
                    <div class="auth-input-group">
                        <label for="authUsername">Username</label>
                        <input type="text" id="authUsername" class="auth-input" placeholder="Enter username" autocomplete="username" required>
                    </div>
                    <div class="auth-input-group">
                        <label for="authPassword">Password</label>
                        <input type="password" id="authPassword" class="auth-input" placeholder="Enter password" autocomplete="current-password" required>
                    </div>
                    <button type="submit" id="authSubmitBtn" class="auth-submit-btn">Login</button>
                </form>
                <div id="authToggleText" class="auth-toggle">
                    Need an account? <a href="#" class="auth-toggle-link">Create one</a>
                </div>
            </div>
        </div>
    </body>
    <script type="module" src="/js/main.js"></script>
</html>
